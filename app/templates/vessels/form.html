{% extends "base.html" %}

{% block title %}{{ 'Editar' if vessel else 'Nova' }} Embarcação{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">
            <i class="fas fa-ship"></i> {{ 'Editar' if vessel else 'Nova' }} Embarcação
        </h1>
        <a href="{{ url_for('vessels.index') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Voltar
        </a>
    </div>

    <form method="POST">
        <div class="row">
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-info-circle"></i> Informações Básicas</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="name">Nome da Embarcação *</label>
                                    <input type="text" class="form-control" id="name" name="name" 
                                           value="{{ vessel.name if vessel else '' }}" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="type">Tipo de Embarcação *</label>
                                    <select class="form-control" id="type" name="type" required>
                                        <option value="">Selecione o tipo</option>
                                        <option value="Iate" {% if vessel and vessel.type == 'Iate' %}selected{% endif %}>Iate</option>
                                        <option value="Lancha" {% if vessel and vessel.type == 'Lancha' %}selected{% endif %}>Lancha</option>
                                        <option value="Veleiro" {% if vessel and vessel.type == 'Veleiro' %}selected{% endif %}>Veleiro</option>
                                        <option value="Jet Ski" {% if vessel and vessel.type == 'Jet Ski' %}selected{% endif %}>Jet Ski</option>
                                        <option value="Barco a Motor" {% if vessel and vessel.type == 'Barco a Motor' %}selected{% endif %}>Barco a Motor</option>
                                        <option value="Outro" {% if vessel and vessel.type == 'Outro' %}selected{% endif %}>Outro</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="brand">Marca/Fabricante</label>
                                    <input type="text" class="form-control" id="brand" name="brand" 
                                           value="{{ vessel.brand if vessel else '' }}">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="model">Modelo</label>
                                    <input type="text" class="form-control" id="model" name="model" 
                                           value="{{ vessel.model if vessel else '' }}">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="year">Ano de Fabricação</label>
                                    <input type="number" class="form-control" id="year" name="year" 
                                           value="{{ vessel.year if vessel else '' }}" min="1900" max="2030">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-ruler"></i> Dimensões</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="length">Comprimento (m)</label>
                                    <input type="number" step="0.1" class="form-control" id="length" name="length" 
                                           value="{{ vessel.length if vessel else '' }}">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="width">Largura (m)</label>
                                    <input type="number" step="0.1" class="form-control" id="width" name="width" 
                                           value="{{ vessel.width if vessel else '' }}">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="height">Altura (m)</label>
                                    <input type="number" step="0.1" class="form-control" id="height" name="height" 
                                           value="{{ vessel.height if vessel else '' }}">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="draft">Calado (m)</label>
                                    <input type="number" step="0.1" class="form-control" id="draft" name="draft" 
                                           value="{{ vessel.draft if vessel else '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-cogs"></i> Características Técnicas</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="engine_type">Tipo de Motor</label>
                                    <select class="form-control" id="engine_type" name="engine_type">
                                        <option value="">Selecione</option>
                                        <option value="Motor Interno" {% if vessel and vessel.engine_type == 'Motor Interno' %}selected{% endif %}>Motor Interno</option>
                                        <option value="Motor Externo" {% if vessel and vessel.engine_type == 'Motor Externo' %}selected{% endif %}>Motor Externo</option>
                                        <option value="Motor Elétrico" {% if vessel and vessel.engine_type == 'Motor Elétrico' %}selected{% endif %}>Motor Elétrico</option>
                                        <option value="Sem Motor" {% if vessel and vessel.engine_type == 'Sem Motor' %}selected{% endif %}>Sem Motor</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="engine_power">Potência do Motor</label>
                                    <input type="text" class="form-control" id="engine_power" name="engine_power" 
                                           value="{{ vessel.engine_power if vessel else '' }}" placeholder="Ex: 2x 300 HP">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="fuel_type">Tipo de Combustível</label>
                                    <select class="form-control" id="fuel_type" name="fuel_type">
                                        <option value="">Selecione</option>
                                        <option value="Gasolina" {% if vessel and vessel.fuel_type == 'Gasolina' %}selected{% endif %}>Gasolina</option>
                                        <option value="Diesel" {% if vessel and vessel.fuel_type == 'Diesel' %}selected{% endif %}>Diesel</option>
                                        <option value="Elétrico" {% if vessel and vessel.fuel_type == 'Elétrico' %}selected{% endif %}>Elétrico</option>
                                        <option value="Híbrido" {% if vessel and vessel.fuel_type == 'Híbrido' %}selected{% endif %}>Híbrido</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="fuel_capacity">Capacidade de Combustível (L)</label>
                                    <input type="number" step="0.1" class="form-control" id="fuel_capacity" name="fuel_capacity" 
                                           value="{{ vessel.fuel_capacity if vessel else '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-file-alt"></i> Documentação</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="registration_number">Número de Registro</label>
                            <input type="text" class="form-control" id="registration_number" name="registration_number" 
                                   value="{{ vessel.registration_number if vessel else '' }}">
                        </div>

                        <div class="form-group">
                            <label for="registration_expiry">Data de Expiração do Registro</label>
                            <input type="date" class="form-control" id="registration_expiry" name="registration_expiry" 
                                   value="{{ vessel.registration_expiry.strftime('%Y-%m-%d') if vessel and vessel.registration_expiry else '' }}">
                        </div>

                        <div class="form-group">
                            <label for="insurance_number">Número do Seguro</label>
                            <input type="text" class="form-control" id="insurance_number" name="insurance_number" 
                                   value="{{ vessel.insurance_number if vessel else '' }}">
                        </div>

                        <div class="form-group">
                            <label for="insurance_expiry">Data de Expiração do Seguro</label>
                            <input type="date" class="form-control" id="insurance_expiry" name="insurance_expiry" 
                                   value="{{ vessel.insurance_expiry.strftime('%Y-%m-%d') if vessel and vessel.insurance_expiry else '' }}">
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-images"></i> Fotos</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="photos">URLs das Fotos (uma por linha)</label>
                            <textarea class="form-control" id="photos" name="photos" rows="4" 
                                      placeholder="https://exemplo.com/foto1.jpg&#10;https://exemplo.com/foto2.jpg">{{ '\n'.join(vessel.photos_list) if vessel and vessel.photos_list else '' }}</textarea>
                            <small class="text-muted">
                                <i class="fas fa-info-circle"></i> 
                                Dica: Use URLs de imagens públicas (ex: Imgur, Google Drive público, etc.)
                            </small>
                        </div>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-sticky-note"></i> Observações</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="description">Descrição</label>
                            <textarea class="form-control" id="description" name="description" rows="3" 
                                      placeholder="Descrição da embarcação...">{{ vessel.description if vessel else '' }}</textarea>
                        </div>

                        <div class="form-group">
                            <label for="notes">Notas</label>
                            <textarea class="form-control" id="notes" name="notes" rows="3" 
                                      placeholder="Notas pessoais...">{{ vessel.notes if vessel else '' }}</textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-end">
            <a href="{{ url_for('vessels.index') }}" class="btn btn-secondary me-2">
                Cancelar
            </a>
            <button type="submit" class="btn btn-success">
                <i class="fas fa-save"></i> {{ 'Atualizar' if vessel else 'Cadastrar' }} Embarcação
            </button>
        </div>
    </form>
</div>
{% endblock %} 